”
nC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder

 
.

 
Services

 
.

 
AddControllers

 
(

  
)

  !
;

! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
DotEnv 
. 
Load 
( 
) 
; 
var 
defaultConnection 
= 
Environment #
.# $"
GetEnvironmentVariable$ :
(: ;
$str; O
)O P
;P Q
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
defaultConnection *
)* +
)+ ,
;, -
builder 
. 
Services 
. 
	Configure 
< 
ApiBehaviorOptions -
>- .
(. /
options/ 6
=>7 9
{ 
options 
. +
SuppressModelStateInvalidFilter +
=, -
true. 2
;2 3
} 
) 
; 
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app   
.   

UseSwagger   
(   
)   
;   
app!! 
.!! 
UseSwaggerUI!! 
(!! 
)!! 
;!! 
}"" 
app%% 
.%% 
UseCors%% 
(%% 
$str%% !
)%%! "
;%%" #
app'' 
.'' 
UseAuthorization'' 
('' 
)'' 
;'' 
app)) 
.)) 
MapControllers)) 
()) 
))) 
;)) 
await++ 
app++ 	
.++	 

RunAsync++
 
(++ 
)++ 
;++ ‰[
èC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\Migrations\20250123214408_Actualizacion4.cs
	namespace 	
Examen2RiveraJoel
 
. 

Migrations &
{ 
public		 

partial		 
class		 
Actualizacion4		 '
:		( )
	Migration		* 3
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Numero 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Piso 
= 
table  
.  !
Column! '
<' (
int( +
>+ ,
(, -
type- 1
:1 2
$str3 8
,8 9
nullable: B
:B C
falseD I
)I J
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 6
,  6 7
nullable  8 @
:  @ A
false  B G
)  G H
.!! 

Annotation!! #
(!!# $
$str!!$ 8
,!!8 9
$str!!: @
)!!@ A
,!!A B
Nombre"" 
="" 
table"" "
.""" #
Column""# )
<"") *
string""* 0
>""0 1
(""1 2
type""2 6
:""6 7
$str""8 G
,""G H
	maxLength""I R
:""R S
$num""T W
,""W X
nullable""Y a
:""a b
false""c h
)""h i
,""i j
Apellido## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
	maxLength##K T
:##T U
$num##V Y
,##Y Z
nullable##[ c
:##c d
false##e j
)##j k
,##k l
Especialidad$$  
=$$! "
table$$# (
.$$( )
Column$$) /
<$$/ 0
string$$0 6
>$$6 7
($$7 8
type$$8 <
:$$< =
$str$$> M
,$$M N
nullable$$O W
:$$W X
false$$Y ^
)$$^ _
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% 0
,((0 1
x((2 3
=>((4 6
x((7 8
.((8 9
Id((9 ;
)((; <
;((< =
})) 
))) 
;)) 
migrationBuilder++ 
.++ 
CreateTable++ (
(++( )
name,, 
:,, 
$str,,  
,,,  !
columns-- 
:-- 
table-- 
=>-- !
new--" %
{.. 
Id// 
=// 
table// 
.// 
Column// %
<//% &
int//& )
>//) *
(//* +
type//+ /
:/// 0
$str//1 6
,//6 7
nullable//8 @
://@ A
false//B G
)//G H
.00 

Annotation00 #
(00# $
$str00$ 8
,008 9
$str00: @
)00@ A
,00A B
Nombre11 
=11 
table11 "
.11" #
Column11# )
<11) *
string11* 0
>110 1
(111 2
type112 6
:116 7
$str118 G
,11G H
nullable11I Q
:11Q R
false11S X
)11X Y
,11Y Z
Apellido22 
=22 
table22 $
.22$ %
Column22% +
<22+ ,
string22, 2
>222 3
(223 4
type224 8
:228 9
$str22: I
,22I J
	maxLength22K T
:22T U
$num22V Y
,22Y Z
nullable22[ c
:22c d
false22e j
)22j k
,22k l
	Direccion33 
=33 
table33  %
.33% &
Column33& ,
<33, -
string33- 3
>333 4
(334 5
type335 9
:339 :
$str33; J
,33J K
	maxLength33L U
:33U V
$num33W Z
,33Z [
nullable33\ d
:33d e
false33f k
)33k l
,33l m
Correo44 
=44 
table44 "
.44" #
Column44# )
<44) *
string44* 0
>440 1
(441 2
type442 6
:446 7
$str448 G
,44G H
	maxLength44I R
:44R S
$num44T W
,44W X
nullable44Y a
:44a b
false44c h
)44h i
}55 
,55 
constraints66 
:66 
table66 "
=>66# %
{77 
table88 
.88 

PrimaryKey88 $
(88$ %
$str88% 2
,882 3
x884 5
=>886 8
x889 :
.88: ;
Id88; =
)88= >
;88> ?
}99 
)99 
;99 
migrationBuilder;; 
.;; 
CreateTable;; (
(;;( )
name<< 
:<< 
$str<< 
,<< 
columns== 
:== 
table== 
=>== !
new==" %
{>> 
Id?? 
=?? 
table?? 
.?? 
Column?? %
<??% &
int??& )
>??) *
(??* +
type??+ /
:??/ 0
$str??1 6
,??6 7
nullable??8 @
:??@ A
false??B G
)??G H
.@@ 

Annotation@@ #
(@@# $
$str@@$ 8
,@@8 9
$str@@: @
)@@@ A
,@@A B

PacienteIdAA 
=AA  
tableAA! &
.AA& '
ColumnAA' -
<AA- .
intAA. 1
>AA1 2
(AA2 3
typeAA3 7
:AA7 8
$strAA9 >
,AA> ?
nullableAA@ H
:AAH I
trueAAJ N
)AAN O
,AAO P
DoctorIdBB 
=BB 
tableBB $
.BB$ %
ColumnBB% +
<BB+ ,
intBB, /
>BB/ 0
(BB0 1
typeBB1 5
:BB5 6
$strBB7 <
,BB< =
nullableBB> F
:BBF G
trueBBH L
)BBL M
,BBM N
FechaCC 
=CC 
tableCC !
.CC! "
ColumnCC" (
<CC( )
DateTimeCC) 1
>CC1 2
(CC2 3
typeCC3 7
:CC7 8
$strCC9 D
,CCD E
nullableCCF N
:CCN O
falseCCP U
)CCU V
,CCV W
HoraDD 
=DD 
tableDD  
.DD  !
ColumnDD! '
<DD' (
TimeOnlyDD( 0
>DD0 1
(DD1 2
typeDD2 6
:DD6 7
$strDD8 >
,DD> ?
nullableDD@ H
:DDH I
falseDDJ O
)DDO P
,DDP Q
ConsultorioEE 
=EE  !
tableEE" '
.EE' (
ColumnEE( .
<EE. /
intEE/ 2
>EE2 3
(EE3 4
typeEE4 8
:EE8 9
$strEE: ?
,EE? @
nullableEEA I
:EEI J
falseEEK P
)EEP Q
}FF 
,FF 
constraintsGG 
:GG 
tableGG "
=>GG# %
{HH 
tableII 
.II 

PrimaryKeyII $
(II$ %
$strII% .
,II. /
xII0 1
=>II2 4
xII5 6
.II6 7
IdII7 9
)II9 :
;II: ;
tableJJ 
.JJ 

ForeignKeyJJ $
(JJ$ %
nameKK 
:KK 
$strKK 7
,KK7 8
columnLL 
:LL 
xLL  !
=>LL" $
xLL% &
.LL& '
DoctorIdLL' /
,LL/ 0
principalTableMM &
:MM& '
$strMM( 0
,MM0 1
principalColumnNN '
:NN' (
$strNN) -
)NN- .
;NN. /
tableOO 
.OO 

ForeignKeyOO $
(OO$ %
namePP 
:PP 
$strPP ;
,PP; <
columnQQ 
:QQ 
xQQ  !
=>QQ" $
xQQ% &
.QQ& '

PacienteIdQQ' 1
,QQ1 2
principalTableRR &
:RR& '
$strRR( 2
,RR2 3
principalColumnSS '
:SS' (
$strSS) -
)SS- .
;SS. /
}TT 
)TT 
;TT 
migrationBuilderVV 
.VV 
CreateIndexVV (
(VV( )
nameWW 
:WW 
$strWW (
,WW( )
tableXX 
:XX 
$strXX 
,XX 
columnYY 
:YY 
$strYY "
)YY" #
;YY# $
migrationBuilder[[ 
.[[ 
CreateIndex[[ (
([[( )
name\\ 
:\\ 
$str\\ *
,\\* +
table]] 
:]] 
$str]] 
,]] 
column^^ 
:^^ 
$str^^ $
)^^$ %
;^^% &
}__ 	
	protectedbb 
overridebb 
voidbb 
Downbb  $
(bb$ %
MigrationBuilderbb% 5
migrationBuilderbb6 F
)bbF G
{cc 	
migrationBuilderdd 
.dd 
	DropTabledd &
(dd& '
nameee 
:ee 
$stree 
)ee 
;ee 
migrationBuildergg 
.gg 
	DropTablegg &
(gg& '
namehh 
:hh 
$strhh #
)hh# $
;hh$ %
migrationBuilderjj 
.jj 
	DropTablejj &
(jj& '
namekk 
:kk 
$strkk 
)kk 
;kk  
migrationBuildermm 
.mm 
	DropTablemm &
(mm& '
namenn 
:nn 
$strnn  
)nn  !
;nn! "
}oo 	
}pp 
}qq –d
ÖC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\Controllers\PacienteController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
PacienteController #
:$ %
ControllerBase& 4
{		 
private

 
readonly

 
AppDBContext

 %
_appDBContext

& 3
;

3 4
public 
PacienteController !
(! "
AppDBContext" .
appDBContext/ ;
); <
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetPacientes) 5
(5 6
)6 7
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Paciente* 2
.2 3
ToListAsync3 >
(> ?
)? @
)@ A
;A B
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostPaciente) 5
(5 6
Paciente6 >
paciente? G
)G H
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
var 
errores 
= 

ModelState (
.( )
Values) /
. 

SelectMany 
(  
v  !
=>" $
v% &
.& '
Errors' -
)- .
. 
Select 
( 
e 
=>  
e! "
." #
ErrorMessage# /
)/ 0
. 
ToList 
( 
) 
; 
return!! 
Ok!! 
(!! 
new!! 
{!! 
message!!  '
=!!( )
$str!!* A
,!!A B
errores!!C J
}!!K L
)!!L M
;!!M N
}"" 
string$$ 
mensaje$$ 
=$$ 
UtilsPaciente$$ *
.$$* +#
ValidacionDatosPaciente$$+ B
($$B C
paciente$$C K
)$$K L
;$$L M
if&& 
(&& 
!&& 
string&& 
.&& 
IsNullOrEmpty&& %
(&&% &
mensaje&&& -
)&&- .
)&&. /
{'' 
return(( 
Ok(( 
((( 
new(( 
{(( 
message((  '
=((( )
mensaje((* 1
}((2 3
)((3 4
;((4 5
})) 
if++ 
(++ 
await++ 
_appDBContext++ #
.++# $
Paciente++$ ,
.++, -
AnyAsync++- 5
(++5 6
p++6 7
=>++8 :
p++; <
.++< =
Correo++= C
==++D F
paciente++G O
.++O P
Correo++P V
)++V W
)++W X
{,, 
return-- 
Ok-- 
(-- 
new-- 
{-- 
message--  '
=--( )
$str--* Q
}--R S
)--S T
;--T U
}.. 
_appDBContext00 
.00 
Paciente00 "
.00" #
Add00# &
(00& '
paciente00' /
)00/ 0
;000 1
await11 
_appDBContext11 
.11  
SaveChangesAsync11  0
(110 1
)111 2
;112 3
return22 
Ok22 
(22 
new22 
{22 
message22 #
=22$ %
$str22& F
,22F G

idPaciente22H R
=22S T
paciente22U ]
.22] ^
Id22^ `
}22a b
)22b c
;22c d
}33 	
[55 	
HttpPut55	 
(55 
$str55 
)55 
]55 
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
PutPaciente66) 4
(664 5
int665 8
id669 ;
,66; <
[66= >
FromBody66> F
]66F G
Paciente66H P
paciente66Q Y
)66Y Z
{77 	
if88 
(88 
!88 

ModelState88 
.88 
IsValid88 #
)88# $
{99 
var:: 
errores:: 
=:: 

ModelState:: (
.::( )
Values::) /
.;; 

SelectMany;; 
(;;  
v;;  !
=>;;" $
v;;% &
.;;& '
Errors;;' -
);;- .
.<< 
Select<< 
(<< 
e<< 
=><<  
e<<! "
.<<" #
ErrorMessage<<# /
)<</ 0
.== 
ToList== 
(== 
)== 
;== 
return?? 
Ok?? 
(?? 
new?? 
{?? 
message??  '
=??( )
$str??* A
,??A B
errores??C J
}??K L
)??L M
;??M N
}@@ 
ifBB 
(BB 
idBB 
!=BB 
pacienteBB 
.BB 
IdBB !
)BB! "
{CC 
returnDD 
OkDD 
(DD 
newDD 
{DD 
messageDD  '
=DD( )
$strDD* K
}DDL M
)DDM N
;DDN O
}EE 
stringGG 
mensajeGG 
=GG 
UtilsPacienteGG *
.GG* +#
ValidacionDatosPacienteGG+ B
(GGB C
pacienteGGC K
)GGK L
;GGL M
ifHH 
(HH 
!HH 
stringHH 
.HH 
IsNullOrEmptyHH %
(HH% &
mensajeHH& -
)HH- .
)HH. /
{II 
returnJJ 
OkJJ 
(JJ 
newJJ 
{JJ 
messageJJ  '
=JJ( )
mensajeJJ* 1
}JJ2 3
)JJ3 4
;JJ4 5
}KK 
varMM 
pacienteExistenteMM !
=MM" #
awaitMM$ )
_appDBContextMM* 7
.MM7 8
PacienteMM8 @
.MM@ A
FirstOrDefaultAsyncMMA T
(MMT U
pMMU V
=>MMW Y
pMMZ [
.MM[ \
IdMM\ ^
==MM_ a
idMMb d
)MMd e
;MMe f
ifNN 
(NN 
pacienteExistenteNN !
==NN" $
nullNN% )
)NN) *
{OO 
returnPP 
OkPP 
(PP 
newPP 
{PP 
messagePP  '
=PP( )
$strPP* C
}PPD E
)PPE F
;PPF G
}QQ 
pacienteExistenteSS 
.SS 
NombreSS $
=SS% &
pacienteSS' /
.SS/ 0
NombreSS0 6
;SS6 7
pacienteExistenteTT 
.TT 
ApellidoTT &
=TT' (
pacienteTT) 1
.TT1 2
ApellidoTT2 :
;TT: ;
pacienteExistenteUU 
.UU 
CorreoUU $
=UU% &
pacienteUU' /
.UU/ 0
CorreoUU0 6
;UU6 7
pacienteExistenteVV 
.VV 
	DireccionVV '
=VV( )
pacienteVV* 2
.VV2 3
	DireccionVV3 <
;VV< =
tryXX 
{YY 
_appDBContextZZ 
.ZZ 
PacienteZZ &
.ZZ& '
UpdateZZ' -
(ZZ- .
pacienteExistenteZZ. ?
)ZZ? @
;ZZ@ A
await[[ 
_appDBContext[[ #
.[[# $
SaveChangesAsync[[$ 4
([[4 5
)[[5 6
;[[6 7
return\\ 
Ok\\ 
(\\ 
new\\ 
{\\ 
message\\  '
=\\( )
$str\\* N
,\\N O
paciente\\P X
=\\Y Z
pacienteExistente\\[ l
}\\m n
)\\n o
;\\o p
}]] 
catch^^ 
(^^ (
DbUpdateConcurrencyException^^ /
)^^/ 0
{__ 
return`` 
Ok`` 
(`` 
new`` 
{`` 
message``  '
=``( )
$str``* L
}``M N
)``N O
;``O P
}aa 
}bb 	
[dd 	

HttpDeletedd	 
(dd 
$strdd 
)dd 
]dd 
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
DeletePacienteee) 7
(ee7 8
intee8 ;
idee< >
)ee> ?
{ff 	
vargg 
pacientegg 
=gg 
awaitgg  
_appDBContextgg! .
.gg. /
Pacientegg/ 7
.gg7 8
FirstOrDefaultAsyncgg8 K
(ggK L
pggL M
=>ggN P
pggQ R
.ggR S
IdggS U
==ggV X
idggY [
)gg[ \
;gg\ ]
ifhh 
(hh 
pacientehh 
==hh 
nullhh  
)hh  !
{ii 
returnjj 
Okjj 
(jj 
newjj 
{jj 
messagejj  '
=jj( )
$strjj* C
}jjD E
)jjE F
;jjF G
}kk 
_appDBContextmm 
.mm 
Pacientemm "
.mm" #
Removemm# )
(mm) *
pacientemm* 2
)mm2 3
;mm3 4
awaitnn 
_appDBContextnn 
.nn  
SaveChangesAsyncnn  0
(nn0 1
)nn1 2
;nn2 3
returnoo 
Okoo 
(oo 
newoo 
{oo 
messageoo #
=oo$ %
$stroo& I
}ooJ K
)ooK L
;ooL M
}pp 	
}qq 
publicss 

staticss 
classss 
UtilsPacientess %
{tt 
publicuu 
staticuu 
stringuu #
ValidacionDatosPacienteuu 4
(uu4 5
Pacienteuu5 =
pacienteuu> F
)uuF G
{vv 	
ifww 
(ww 
stringww 
.ww 
IsNullOrEmptyww $
(ww$ %
pacienteww% -
.ww- .
Nombreww. 4
)ww4 5
)ww5 6
{xx 
returnyy 
$stryy 0
;yy0 1
}zz 
if{{ 
({{ 
string{{ 
.{{ 
IsNullOrEmpty{{ $
({{$ %
paciente{{% -
.{{- .
Apellido{{. 6
){{6 7
){{7 8
{|| 
return}} 
$str}} 2
;}}2 3
}~~ 
if 
( 
string 
. 
IsNullOrEmpty $
($ %
paciente% -
.- .
Correo. 4
)4 5
)5 6
{
ÄÄ 
return
ÅÅ 
$str
ÅÅ 0
;
ÅÅ0 1
}
ÇÇ 
if
ÉÉ 
(
ÉÉ 
paciente
ÉÉ 
.
ÉÉ 
	Direccion
ÉÉ "
==
ÉÉ# %
null
ÉÉ& *
)
ÉÉ* +
{
ÑÑ 
return
ÖÖ 
$str
ÖÖ 3
;
ÖÖ3 4
}
ÜÜ 
if
àà 
(
àà 
paciente
àà 
.
àà 
Nombre
àà 
.
àà  
Length
àà  &
>
àà' (
$num
àà) ,
)
àà, -
{
ââ 
return
ää 
$str
ää H
;
ääH I
}
ãã 
if
åå 
(
åå 
paciente
åå 
.
åå 
Apellido
åå !
.
åå! "
Length
åå" (
>
åå) *
$num
åå+ .
)
åå. /
{
çç 
return
éé 
$str
éé J
;
ééJ K
}
èè 
if
êê 
(
êê 
paciente
êê 
.
êê 
Correo
êê 
.
êê  
Length
êê  &
>
êê' (
$num
êê) ,
)
êê, -
{
ëë 
return
íí 
$str
íí H
;
ííH I
}
ìì 
if
îî 
(
îî 
paciente
îî 
.
îî 
	Direccion
îî "
.
îî" #
Length
îî# )
>
îî* +
$num
îî, /
)
îî/ 0
{
ïï 
return
ññ 
$str
ññ K
;
ññK L
}
óó 
return
ôô 
string
ôô 
.
ôô 
Empty
ôô 
;
ôô  
}
öö 	
}
õõ 
}úú “_
ÉC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\Controllers\MedicoController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
MedicoController !
:" #
ControllerBase$ 2
{		 
private

 
readonly

 
AppDBContext

 %
_appDBContext

& 3
;

3 4
public 
MedicoController 
(  
AppDBContext  ,
appDBContext- 9
)9 :
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (

GetMedicos) 3
(3 4
)4 5
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Medico* 0
.0 1
ToListAsync1 <
(< =
)= >
)> ?
;? @
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (

PostMedico) 3
(3 4
Medico4 :
medico; A
)A B
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
var 
errores 
= 

ModelState (
.( )
Values) /
. 

SelectMany 
(  
v  !
=>" $
v% &
.& '
Errors' -
)- .
. 
Select 
( 
e 
=>  
e! "
." #
ErrorMessage# /
)/ 0
. 
ToList 
( 
) 
; 
return!! 
Ok!! 
(!! 
new!! 
{!! 
message!!  '
=!!( )
$str!!* A
,!!A B
errores!!C J
}!!K L
)!!L M
;!!M N
}"" 
string$$ 
mensaje$$ 
=$$ 
UtilsMedico$$ (
.$$( )!
ValidacionDatosMedico$$) >
($$> ?
medico$$? E
)$$E F
;$$F G
if&& 
(&& 
!&& 
string&& 
.&& 
IsNullOrEmpty&& %
(&&% &
mensaje&&& -
)&&- .
)&&. /
{'' 
return(( 
Ok(( 
((( 
new(( 
{(( 
message((  '
=((( )
mensaje((* 1
}((2 3
)((3 4
;((4 5
})) 
if++ 
(++ 
await++ 
_appDBContext++ #
.++# $
Medico++$ *
.++* +
AnyAsync+++ 3
(++3 4
m++4 5
=>++6 8
m++9 :
.++: ;
Nombre++; A
==++B D
medico++E K
.++K L
Nombre++L R
&&++S U
m++V W
.++W X
Apellido++X `
==++a c
medico++d j
.++j k
Apellido++k s
)++s t
)++t u
{,, 
return-- 
Ok-- 
(-- 
new-- 
{-- 
message--  '
=--( )
$str--* Z
}--[ \
)--\ ]
;--] ^
}.. 
_appDBContext00 
.00 
Medico00  
.00  !
Add00! $
(00$ %
medico00% +
)00+ ,
;00, -
await11 
_appDBContext11 
.11  
SaveChangesAsync11  0
(110 1
)111 2
;112 3
return22 
Ok22 
(22 
new22 
{22 
message22 #
=22$ %
$str22& D
,22D E
idMedico22F N
=22O P
medico22Q W
.22W X
Id22X Z
}22[ \
)22\ ]
;22] ^
}33 	
[55 	
HttpPut55	 
(55 
$str55 
)55 
]55 
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
	PutMedico66) 2
(662 3
int663 6
id667 9
,669 :
[66; <
FromBody66< D
]66D E
Medico66F L
medico66M S
)66S T
{77 	
if88 
(88 
!88 

ModelState88 
.88 
IsValid88 #
)88# $
{99 
var:: 
errores:: 
=:: 

ModelState:: (
.::( )
Values::) /
.;; 

SelectMany;; 
(;;  
v;;  !
=>;;" $
v;;% &
.;;& '
Errors;;' -
);;- .
.<< 
Select<< 
(<< 
e<< 
=><<  
e<<! "
.<<" #
ErrorMessage<<# /
)<</ 0
.== 
ToList== 
(== 
)== 
;== 
return?? 
Ok?? 
(?? 
new?? 
{?? 
message??  '
=??( )
$str??* A
,??A B
errores??C J
}??K L
)??L M
;??M N
}@@ 
ifBB 
(BB 
idBB 
!=BB 
medicoBB 
.BB 
IdBB 
)BB  
{CC 
returnDD 
OkDD 
(DD 
newDD 
{DD 
messageDD  '
=DD( )
$strDD* I
}DDJ K
)DDK L
;DDL M
}EE 
stringGG 
mensajeGG 
=GG 
UtilsMedicoGG (
.GG( )!
ValidacionDatosMedicoGG) >
(GG> ?
medicoGG? E
)GGE F
;GGF G
ifHH 
(HH 
!HH 
stringHH 
.HH 
IsNullOrEmptyHH %
(HH% &
mensajeHH& -
)HH- .
)HH. /
{II 
returnJJ 
OkJJ 
(JJ 
newJJ 
{JJ 
messageJJ  '
=JJ( )
mensajeJJ* 1
}JJ2 3
)JJ3 4
;JJ4 5
}KK 
varMM 
medicoExistenteMM 
=MM  !
awaitMM" '
_appDBContextMM( 5
.MM5 6
MedicoMM6 <
.MM< =
FirstOrDefaultAsyncMM= P
(MMP Q
mMMQ R
=>MMS U
mMMV W
.MMW X
IdMMX Z
==MM[ ]
idMM^ `
)MM` a
;MMa b
ifNN 
(NN 
medicoExistenteNN 
==NN  "
nullNN# '
)NN' (
{OO 
returnPP 
OkPP 
(PP 
newPP 
{PP 
messagePP  '
=PP( )
$strPP* A
}PPB C
)PPC D
;PPD E
}QQ 
medicoExistenteSS 
.SS 
NombreSS "
=SS# $
medicoSS% +
.SS+ ,
NombreSS, 2
;SS2 3
medicoExistenteTT 
.TT 
ApellidoTT $
=TT% &
medicoTT' -
.TT- .
ApellidoTT. 6
;TT6 7
medicoExistenteUU 
.UU 
EspecialidadUU (
=UU) *
medicoUU+ 1
.UU1 2
EspecialidadUU2 >
;UU> ?
tryWW 
{XX 
_appDBContextYY 
.YY 
MedicoYY $
.YY$ %
UpdateYY% +
(YY+ ,
medicoExistenteYY, ;
)YY; <
;YY< =
awaitZZ 
_appDBContextZZ #
.ZZ# $
SaveChangesAsyncZZ$ 4
(ZZ4 5
)ZZ5 6
;ZZ6 7
return[[ 
Ok[[ 
([[ 
new[[ 
{[[ 
message[[  '
=[[( )
$str[[* L
,[[L M
medico[[N T
=[[U V
medicoExistente[[W f
}[[g h
)[[h i
;[[i j
}\\ 
catch]] 
(]] (
DbUpdateConcurrencyException]] /
)]]/ 0
{^^ 
return__ 
Ok__ 
(__ 
new__ 
{__  
message__! (
=__) *
$str__+ K
}__L M
)__M N
;__N O
}`` 
}aa 	
[cc 	

HttpDeletecc	 
(cc 
$strcc 
)cc 
]cc 
publicdd 
asyncdd 
Taskdd 
<dd 
IActionResultdd '
>dd' (
DeleteMedicodd) 5
(dd5 6
intdd6 9
iddd: <
)dd< =
{ee 	
varff 
medicoff 
=ff 
awaitff 
_appDBContextff ,
.ff, -
Medicoff- 3
.ff3 4
FirstOrDefaultAsyncff4 G
(ffG H
mffH I
=>ffJ L
mffM N
.ffN O
IdffO Q
==ffR T
idffU W
)ffW X
;ffX Y
ifgg 
(gg 
medicogg 
==gg 
nullgg 
)gg 
{hh 
returnii 
Okii 
(ii 
newii 
{ii 
messageii  '
=ii( )
$strii* A
}iiB C
)iiC D
;iiD E
}jj 
_appDBContextll 
.ll 
Medicoll  
.ll  !
Removell! '
(ll' (
medicoll( .
)ll. /
;ll/ 0
awaitmm 
_appDBContextmm 
.mm  
SaveChangesAsyncmm  0
(mm0 1
)mm1 2
;mm2 3
returnnn 
Oknn 
(nn 
newnn 
{nn 
messagenn #
=nn$ %
$strnn& G
}nnH I
)nnI J
;nnJ K
}oo 	
}pp 
publicrr 

staticrr 
classrr 
UtilsMedicorr #
{ss 
publictt 
statictt 
stringtt !
ValidacionDatosMedicott 2
(tt2 3
Medicott3 9
medicott: @
)tt@ A
{uu 	
ifvv 
(vv 
stringvv 
.vv 
IsNullOrEmptyvv $
(vv$ %
medicovv% +
.vv+ ,
Nombrevv, 2
)vv2 3
)vv3 4
{ww 
returnxx 
$strxx 0
;xx0 1
}yy 
ifzz 
(zz 
stringzz 
.zz 
IsNullOrEmptyzz $
(zz$ %
medicozz% +
.zz+ ,
Apellidozz, 4
)zz4 5
)zz5 6
{{{ 
return|| 
$str|| 2
;||2 3
}}} 
if~~ 
(~~ 
string~~ 
.~~ 
IsNullOrEmpty~~ $
(~~$ %
medico~~% +
.~~+ ,
Especialidad~~, 8
)~~8 9
)~~9 :
{ 
return
ÄÄ 
$str
ÄÄ 6
;
ÄÄ6 7
}
ÅÅ 
if
ÉÉ 
(
ÉÉ 
medico
ÉÉ 
.
ÉÉ 
Nombre
ÉÉ 
.
ÉÉ 
Length
ÉÉ $
>
ÉÉ% &
$num
ÉÉ' *
)
ÉÉ* +
{
ÑÑ 
return
ÖÖ 
$str
ÖÖ H
;
ÖÖH I
}
ÜÜ 
if
áá 
(
áá 
medico
áá 
.
áá 
Apellido
áá 
.
áá  
Length
áá  &
>
áá' (
$num
áá) ,
)
áá, -
{
àà 
return
ââ 
$str
ââ J
;
ââJ K
}
ää 
if
ãã 
(
ãã 
medico
ãã 
.
ãã 
Especialidad
ãã #
.
ãã# $
Length
ãã$ *
>
ãã+ ,
$num
ãã- 0
)
ãã0 1
{
åå 
return
çç 
$str
çç N
;
ççN O
}
éé 
return
êê 
string
êê 
.
êê 
Empty
êê 
;
êê  
}
ëë 	
}
íí 
}ìì ƒP
àC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\Controllers\ConsultorioController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class !
ConsultorioController &
:' (
ControllerBase) 7
{		 
private

 
readonly

 
AppDBContext

 %
_appDBContext

& 3
;

3 4
public !
ConsultorioController $
($ %
AppDBContext% 1
appDBContext2 >
)> ?
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetConsultorios) 8
(8 9
)9 :
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Consultorio* 5
.5 6
ToListAsync6 A
(A B
)B C
)C D
;D E
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostConsultorio) 8
(8 9
Consultorio9 D
consultorioE P
)P Q
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
var 
errores 
= 

ModelState (
.( )
Values) /
. 

SelectMany 
(  
v  !
=>" $
v% &
.& '
Errors' -
)- .
. 
Select 
( 
e 
=>  
e! "
." #
ErrorMessage# /
)/ 0
. 
ToList 
( 
) 
; 
return!! 
Ok!! 
(!! 
new!! 
{!! 
message!!  '
=!!( )
$str!!* A
,!!A B
errores!!C J
}!!K L
)!!L M
;!!M N
}"" 
string$$ 
mensaje$$ 
=$$ 
UtilsConsultorio$$ -
.$$- .&
ValidacionDatosConsultorio$$. H
($$H I
consultorio$$I T
)$$T U
;$$U V
if&& 
(&& 
!&& 
string&& 
.&& 
IsNullOrEmpty&& %
(&&% &
mensaje&&& -
)&&- .
)&&. /
{'' 
return(( 
Ok(( 
((( 
new(( 
{(( 
message((  '
=((( )
mensaje((* 1
}((2 3
)((3 4
;((4 5
})) 
_appDBContext++ 
.++ 
Consultorio++ %
.++% &
Add++& )
(++) *
consultorio++* 5
)++5 6
;++6 7
await,, 
_appDBContext,, 
.,,  
SaveChangesAsync,,  0
(,,0 1
),,1 2
;,,2 3
return-- 
Ok-- 
(-- 
new-- 
{-- 
message-- #
=--$ %
$str--& I
,--I J
id--K M
=--N O
consultorio--P [
.--[ \
Id--\ ^
}--_ `
)--` a
;--a b
}.. 	
[00 	
HttpPut00	 
(00 
$str00 
)00 
]00 
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (
PutConsultorio11) 7
(117 8
int118 ;
id11< >
,11> ?
[11@ A
FromBody11A I
]11I J
Consultorio11K V
consultorio11W b
)11b c
{22 	
if33 
(33 
!33 

ModelState33 
.33 
IsValid33 #
)33# $
{44 
var55 
errores55 
=55 

ModelState55 (
.55( )
Values55) /
.66 

SelectMany66 
(66  
v66  !
=>66" $
v66% &
.66& '
Errors66' -
)66- .
.77 
Select77 
(77 
e77 
=>77  
e77! "
.77" #
ErrorMessage77# /
)77/ 0
.88 
ToList88 
(88 
)88 
;88 
return:: 
Ok:: 
(:: 
new:: 
{:: 
message::  '
=::( )
$str::* A
,::A B
errores::C J
}::K L
)::L M
;::M N
};; 
if== 
(== 
id== 
!=== 
consultorio== !
.==! "
Id==" $
)==$ %
{>> 
return?? 
Ok?? 
(?? 
new?? 
{?? 
message??  '
=??( )
$str??* N
}??O P
)??P Q
;??Q R
}@@ 
stringBB 
mensajeBB 
=BB 
UtilsConsultorioBB -
.BB- .&
ValidacionDatosConsultorioBB. H
(BBH I
consultorioBBI T
)BBT U
;BBU V
ifCC 
(CC 
!CC 
stringCC 
.CC 
IsNullOrEmptyCC %
(CC% &
mensajeCC& -
)CC- .
)CC. /
{DD 
returnEE 
OkEE 
(EE 
newEE 
{EE 
messageEE  '
=EE( )
mensajeEE* 1
}EE2 3
)EE3 4
;EE4 5
}FF 
varHH  
consultorioExistenteHH $
=HH% &
awaitHH' ,
_appDBContextHH- :
.HH: ;
ConsultorioHH; F
.HHF G
FirstOrDefaultAsyncHHG Z
(HHZ [
cHH[ \
=>HH] _
cHH` a
.HHa b
IdHHb d
==HHe g
idHHh j
)HHj k
;HHk l
ifII 
(II  
consultorioExistenteII $
==II% '
nullII( ,
)II, -
{JJ 
returnKK 
OkKK 
(KK 
newKK 
{KK 
messageKK  '
=KK( )
$strKK* F
}KKG H
)KKH I
;KKI J
}LL  
consultorioExistenteNN  
.NN  !
NumeroNN! '
=NN( )
consultorioNN* 5
.NN5 6
NumeroNN6 <
;NN< = 
consultorioExistenteOO  
.OO  !
PisoOO! %
=OO& '
consultorioOO( 3
.OO3 4
PisoOO4 8
;OO8 9
tryQQ 
{RR 
_appDBContextSS 
.SS 
ConsultorioSS )
.SS) *
UpdateSS* 0
(SS0 1 
consultorioExistenteSS1 E
)SSE F
;SSF G
awaitTT 
_appDBContextTT #
.TT# $
SaveChangesAsyncTT$ 4
(TT4 5
)TT5 6
;TT6 7
returnUU 
OkUU 
(UU 
newUU 
{UU 
messageUU  '
=UU( )
$strUU* Q
,UUQ R
consultorioUUS ^
=UU_ ` 
consultorioExistenteUUa u
}UUv w
)UUw x
;UUx y
}VV 
catchWW 
(WW (
DbUpdateConcurrencyExceptionWW /
)WW/ 0
{XX 
returnYY 
OkYY 
(YY 
newYY 
{YY 
messageYY  '
=YY( )
$strYY* O
}YYP Q
)YYQ R
;YYR S
}ZZ 
}[[ 	
[]] 	

HttpDelete]]	 
(]] 
$str]] 
)]] 
]]] 
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
DeleteConsultorio^^) :
(^^: ;
int^^; >
id^^? A
)^^A B
{__ 	
var`` 
consultorio`` 
=`` 
await`` #
_appDBContext``$ 1
.``1 2
Consultorio``2 =
.``= >
FirstOrDefaultAsync``> Q
(``Q R
c``R S
=>``T V
c``W X
.``X Y
Id``Y [
==``\ ^
id``_ a
)``a b
;``b c
ifaa 
(aa 
consultorioaa 
==aa 
nullaa #
)aa# $
{bb 
returncc 
Okcc 
(cc 
newcc 
{cc 
messagecc  '
=cc( )
$strcc* F
}ccG H
)ccH I
;ccI J
}dd 
_appDBContextff 
.ff 
Consultorioff %
.ff% &
Removeff& ,
(ff, -
consultorioff- 8
)ff8 9
;ff9 :
awaitgg 
_appDBContextgg 
.gg  
SaveChangesAsyncgg  0
(gg0 1
)gg1 2
;gg2 3
returnhh 
Okhh 
(hh 
newhh 
{hh 
messagehh #
=hh$ %
$strhh& L
}hhM N
)hhN O
;hhO P
}ii 	
}jj 
publicll 

staticll 
classll 
UtilsConsultorioll (
{mm 
publicnn 
staticnn 
stringnn &
ValidacionDatosConsultorionn 7
(nn7 8
Consultorionn8 C
consultorionnD O
)nnO P
{oo 	
ifpp 
(pp 
consultoriopp 
.pp 
Numeropp "
==pp# %
nullpp& *
)pp* +
{qq 
returnrr 
$strrr 0
;rr0 1
}ss 
iftt 
(tt 
consultoriott 
.tt 
Pisott  
==tt! #
nulltt$ (
)tt( )
{uu 
returnvv 
$strvv .
;vv. /
}ww 
returnyy 
stringyy 
.yy 
Emptyyy 
;yy  
}zz 	
}{{ 
}|| ¿U
ÅC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\Controllers\CitaController.cs
	namespace 	
Prueba2Hotel
 
. 
Controllers "
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
CitaController 
:  !
ControllerBase" 0
{		 
private

 
readonly

 
AppDBContext

 %
_appDBContext

& 3
;

3 4
public 
CitaController 
( 
AppDBContext *
appDBContext+ 7
)7 8
{ 	
_appDBContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetCitas) 1
(1 2
)2 3
{ 	
return 
Ok 
( 
await 
_appDBContext )
.) *
Cita* .
.. /
ToListAsync/ :
(: ;
); <
)< =
;= >
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
PostCita) 1
(1 2
Cita2 6
cita7 ;
); <
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
var 
errores 
= 

ModelState (
.( )
Values) /
. 

SelectMany 
(  
v  !
=>" $
v% &
.& '
Errors' -
)- .
. 
Select 
( 
e 
=>  
e! "
." #
ErrorMessage# /
)/ 0
. 
ToList 
( 
) 
; 
return!! 
Ok!! 
(!! 
new!! 
{!! 
message!!  '
=!!( )
$str!!* A
,!!A B
errores!!C J
}!!K L
)!!L M
;!!M N
}"" 
string$$ 
mensaje$$ 
=$$ 
	UtilsCita$$ &
.$$& '
ValidacionDatosCita$$' :
($$: ;
cita$$; ?
)$$? @
;$$@ A
if&& 
(&& 
!&& 
string&& 
.&& 
IsNullOrEmpty&& %
(&&% &
mensaje&&& -
)&&- .
)&&. /
{'' 
return(( 
Ok(( 
((( 
new(( 
{(( 
message((  '
=((( )
mensaje((* 1
}((2 3
)((3 4
;((4 5
})) 
var,, 
citaExistente,, 
=,, 
await,,  %
_appDBContext,,& 3
.,,3 4
Cita,,4 8
.-- 
FirstOrDefaultAsync-- $
(--$ %
c--% &
=>--' )
c--* +
.--+ ,
Fecha--, 1
==--2 4
cita--5 9
.--9 :
Fecha--: ?
&&--@ B
c--C D
.--D E
Hora--E I
==--J L
cita--M Q
.--Q R
Hora--R V
&&--W Y
c--Z [
.--[ \
Consultorio--\ g
==--h j
cita--k o
.--o p
Consultorio--p {
)--{ |
;--| }
if// 
(// 
citaExistente// 
!=//  
null//! %
)//% &
{00 
return11 
Ok11 
(11 
new11 
{11 
message11  '
=11( )
$str11* k
}11l m
)11m n
;11n o
}22 
_appDBContext44 
.44 
Cita44 
.44 
Add44 "
(44" #
cita44# '
)44' (
;44( )
await55 
_appDBContext55 
.55  
SaveChangesAsync55  0
(550 1
)551 2
;552 3
return66 
Ok66 
(66 
new66 
{66 
message66 #
=66$ %
$str66& B
,66B C
idCita66D J
=66K L
cita66M Q
.66Q R
Id66R T
}66U V
)66V W
;66W X
}77 	
[99 	
HttpPut99	 
(99 
$str99 
)99 
]99 
public:: 
async:: 
Task:: 
<:: 
IActionResult:: '
>::' (
PutCita::) 0
(::0 1
int::1 4
id::5 7
,::7 8
[::9 :
FromBody::: B
]::B C
Cita::D H
cita::I M
)::M N
{;; 	
if<< 
(<< 
!<< 

ModelState<< 
.<< 
IsValid<< #
)<<# $
{== 
var>> 
errores>> 
=>> 

ModelState>> (
.>>( )
Values>>) /
.?? 

SelectMany?? 
(??  
v??  !
=>??" $
v??% &
.??& '
Errors??' -
)??- .
.@@ 
Select@@ 
(@@ 
e@@ 
=>@@  
e@@! "
.@@" #
ErrorMessage@@# /
)@@/ 0
.AA 
ToListAA 
(AA 
)AA 
;AA 
returnCC 
OkCC 
(CC 
newCC 
{CC 
messageCC  '
=CC( )
$strCC* A
,CCA B
erroresCCC J
}CCK L
)CCL M
;CCM N
}DD 
stringFF 
mensajeFF 
=FF 
	UtilsCitaFF &
.FF& '
ValidacionDatosCitaFF' :
(FF: ;
citaFF; ?
)FF? @
;FF@ A
ifGG 
(GG 
!GG 
stringGG 
.GG 
IsNullOrEmptyGG %
(GG% &
mensajeGG& -
)GG- .
)GG. /
{HH 
returnII 
OkII 
(II 
newII 
{II 
messageII  '
=II( )
mensajeII* 1
}II2 3
)II3 4
;II4 5
}JJ 
varLL 
citaExistenteLL 
=LL 
awaitLL  %
_appDBContextLL& 3
.LL3 4
CitaLL4 8
.LL8 9
FirstOrDefaultAsyncLL9 L
(LLL M
cLLM N
=>LLO Q
cLLR S
.LLS T
IdLLT V
==LLW Y
idLLZ \
)LL\ ]
;LL] ^
ifMM 
(MM 
citaExistenteMM 
==MM  
nullMM! %
)MM% &
{NN 
returnOO 
OkOO 
(OO 
newOO 
{OO 
messageOO  '
=OO( )
$strOO* ?
}OO@ A
)OOA B
;OOB C
}PP 
citaExistenteRR 
.RR 
FechaRR 
=RR  !
citaRR" &
.RR& '
FechaRR' ,
;RR, -
citaExistenteSS 
.SS 
HoraSS 
=SS  
citaSS! %
.SS% &
HoraSS& *
;SS* +
citaExistenteTT 
.TT 

PacienteIdTT $
=TT% &
citaTT' +
.TT+ ,

PacienteIdTT, 6
;TT6 7
citaExistenteUU 
.UU 
DoctorIdUU "
=UU# $
citaUU% )
.UU) *
DoctorIdUU* 2
;UU2 3
tryWW 
{XX 
_appDBContextYY 
.YY 
CitaYY "
.YY" #
UpdateYY# )
(YY) *
citaExistenteYY* 7
)YY7 8
;YY8 9
awaitZZ 
_appDBContextZZ #
.ZZ# $
SaveChangesAsyncZZ$ 4
(ZZ4 5
)ZZ5 6
;ZZ6 7
return[[ 
Ok[[ 
([[ 
new[[ 
{[[ 
message[[  '
=[[( )
$str[[* J
,[[J K
cita[[L P
=[[Q R
citaExistente[[S `
}[[a b
)[[b c
;[[c d
}\\ 
catch]] 
(]] (
DbUpdateConcurrencyException]] /
)]]/ 0
{^^ 
return__ 
Ok__ 
(__ 
new__ 
{__ 
message__  '
=__( )
$str__* H
}__I J
)__J K
;__K L
}`` 
}aa 	
[cc 	

HttpDeletecc	 
(cc 
$strcc 
)cc 
]cc 
publicdd 
asyncdd 
Taskdd 
<dd 
IActionResultdd '
>dd' (

DeleteCitadd) 3
(dd3 4
intdd4 7
iddd8 :
)dd: ;
{ee 	
varff 
citaff 
=ff 
awaitff 
_appDBContextff *
.ff* +
Citaff+ /
.ff/ 0
FirstOrDefaultAsyncff0 C
(ffC D
cffD E
=>ffF H
cffI J
.ffJ K
IdffK M
==ffN P
idffQ S
)ffS T
;ffT U
ifgg 
(gg 
citagg 
==gg 
nullgg 
)gg 
{hh 
returnii 
Okii 
(ii 
newii 
{ii 
messageii  '
=ii( )
$strii* ?
}ii@ A
)iiA B
;iiB C
}jj 
_appDBContextll 
.ll 
Citall 
.ll 
Removell %
(ll% &
citall& *
)ll* +
;ll+ ,
awaitmm 
_appDBContextmm 
.mm  
SaveChangesAsyncmm  0
(mm0 1
)mm1 2
;mm2 3
returnnn 
Oknn 
(nn 
newnn 
{nn 
messagenn #
=nn$ %
$strnn& E
}nnF G
)nnG H
;nnH I
}oo 	
}pp 
publicrr 

staticrr 
classrr 
	UtilsCitarr !
{ss 
publictt 
statictt 
stringtt 
ValidacionDatosCitatt 0
(tt0 1
Citatt1 5
citatt6 :
)tt: ;
{uu 	
ifvv 
(vv 
citavv 
.vv 
Fechavv 
==vv 
nullvv "
)vv" #
{ww 
returnxx 
$strxx /
;xx/ 0
}yy 
ifzz 
(zz 
citazz 
.zz 
Horazz 
==zz 
nullzz !
)zz! "
{{{ 
return|| 
$str|| .
;||. /
}}} 
return 
string 
. 
Empty 
;  
}
ÄÄ 	
}
ÅÅ 
}ÇÇ ö`
sC:\Users\joela\Documents\Semestre6\Pruebas de software\Examenes\Examen2RiveraJoel\Examen2RiveraJoel\AppDBContext.cs
	namespace 	
Prueba2Hotel
 
{ 
public 

class 
AppDBContext 
: 
	DbContext  )
{ 
public		 
AppDBContext		 
(		 
DbContextOptions		 ,
<		, -
AppDBContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{		T U
}		V W
public 
DbSet 
< 
Cita 
> 
Cita 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DbSet 
< 
Paciente 
> 
Paciente '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
DbSet 
< 
Medico 
> 
Medico #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DbSet 
< 
Consultorio  
>  !
Consultorio" -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
Medico  &
>& '
(' (
entity( .
=>/ 1
{ 
entity 
. 
HasKey 
( 
c 
=>  "
c# $
.$ %
Id% '
)' (
;( )
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Nombre' -
)- .
.. /

IsRequired/ 9
(9 :
): ;
.; <
HasMaxLength< H
(H I
$numI L
)L M
;M N
entity 
. 
Property 
(  
c  !
=>" $
c% &
.& '
Apellido' /
)/ 0
.0 1

IsRequired1 ;
(; <
)< =
.= >
HasMaxLength> J
(J K
$numK N
)N O
;O P
} 
) 
; 
modelBuilder 
. 
Entity 
<  
Paciente  (
>( )
() *
entity* 0
=>1 3
{ 
entity 
. 
HasKey 
( 
h 
=>  "
h# $
.$ %
Id% '
)' (
;( )
entity 
. 
Property 
(  
r  !
=>" $
r% &
.& '
Nombre' -
)- .
.. /

IsRequired/ 9
(9 :
): ;
;; <
entity   
.   
Property   
(    
c    !
=>  " $
c  % &
.  & '
Apellido  ' /
)  / 0
.  0 1

IsRequired  1 ;
(  ; <
)  < =
.  = >
HasMaxLength  > J
(  J K
$num  K N
)  N O
;  O P
entity!! 
.!! 
Property!! 
(!!  
c!!  !
=>!!" $
c!!% &
.!!& '
Correo!!' -
)!!- .
.!!. /

IsRequired!!/ 9
(!!9 :
)!!: ;
.!!; <
HasMaxLength!!< H
(!!H I
$num!!I L
)!!L M
;!!M N
entity"" 
."" 
Property"" 
(""  
m""  !
=>""" $
m""% &
.""& '
	Direccion""' 0
)""0 1
.""1 2

IsRequired""2 <
(""< =
)""= >
.""> ?
HasMaxLength""? K
(""K L
$num""L O
)""O P
;""P Q
}## 
)## 
;## 
modelBuilder%% 
.%% 
Entity%% 
<%%  
Cita%%  $
>%%$ %
(%%% &
entity%%& ,
=>%%- /
{&& 
entity'' 
.'' 
HasKey'' 
('' 
r'' 
=>''  "
r''# $
.''$ %
Id''% '
)''' (
;''( )
entity(( 
.(( 
Property(( 
(((  
r((  !
=>((" $
r((% &
.((& '
Fecha((' ,
)((, -
.((- .

IsRequired((. 8
(((8 9
)((9 :
;((: ;
entity)) 
.)) 
Property)) 
())  
r))  !
=>))" $
r))% &
.))& '
Hora))' +
)))+ ,
.)), -

IsRequired))- 7
())7 8
)))8 9
;))9 :
entity** 
.** 
Property** 
(**  
r**  !
=>**" $
r**% &
.**& '
Consultorio**' 2
)**2 3
.**3 4

IsRequired**4 >
(**> ?
)**? @
;**@ A
entity,, 
.,, 
HasOne,, 
(,, 
r,, 
=>,,  "
r,,# $
.,,$ %
Paciente,,% -
),,- .
.-- 
WithMany-- 
(--  
p--  !
=>--" $
p--% &
.--& '
Reservas--' /
)--/ 0
... 
HasForeignKey.. $
(..$ %
r..% &
=>..' )
r..* +
...+ ,

PacienteId.., 6
)..6 7
;..7 8
entity00 
.00 
HasOne00 
(00 
r00 
=>00  "
r00# $
.00$ %
Medico00% +
)00+ ,
.11 
WithMany11 
(11  
m11  !
=>11" $
m11% &
.11& '
Reservas11' /
)11/ 0
.22 
HasForeignKey22 $
(22$ %
r22% &
=>22' )
r22* +
.22+ ,
DoctorId22, 4
)224 5
;225 6
}33 
)33 
;33 
modelBuilder55 
.55 
Entity55 
<55  
Consultorio55  +
>55+ ,
(55, -
entity55- 3
=>554 6
{66 
entity77 
.77 
HasKey77 
(77 
s77 
=>77  "
s77# $
.77$ %
Id77% '
)77' (
;77( )
entity88 
.88 
Property88 
(88  
s88  !
=>88" $
s88% &
.88& '
Numero88' -
)88- .
.88. /

IsRequired88/ 9
(889 :
)88: ;
;88; <
entity99 
.99 
Property99 
(99  
s99  !
=>99" $
s99% &
.99& '
Piso99' +
)99+ ,
.99, -

IsRequired99- 7
(997 8
)998 9
;999 :
};; 
);; 
;;; 
}<< 	
}== 
public?? 

class?? 
Medico?? 
{@@ 
[AA 	

JsonIgnoreAA	 
]AA 
publicBB 
intBB 
IdBB 
{BB 
getBB 
;BB 
setBB  
;BB  !
}BB" #
publicCC 
requiredCC 
stringCC 
NombreCC %
{CC& '
getCC( +
;CC+ ,
setCC- 0
;CC0 1
}CC2 3
publicDD 
requiredDD 
stringDD 
ApellidoDD '
{DD( )
getDD* -
;DD- .
setDD/ 2
;DD2 3
}DD4 5
publicEE 
requiredEE 
stringEE 
EspecialidadEE +
{EE, -
getEE. 1
;EE1 2
setEE3 6
;EE6 7
}EE8 9
[FF 	

JsonIgnoreFF	 
]FF 
publicGG 
ListGG 
<GG 
CitaGG 
>GG 
?GG 
ReservasGG #
{GG$ %
getGG& )
;GG) *
setGG+ .
;GG. /
}GG0 1
}HH 
publicJJ 

classJJ 
PacienteJJ 
{KK 
[LL 	

JsonIgnoreLL	 
]LL 
publicMM 
intMM 
IdMM 
{MM 
getMM 
;MM 
setMM  
;MM  !
}MM" #
publicNN 
requiredNN 
stringNN 
NombreNN %
{NN& '
getNN( +
;NN+ ,
setNN- 0
;NN0 1
}NN2 3
publicOO 
requiredOO 
stringOO 
ApellidoOO '
{OO( )
getOO* -
;OO- .
setOO/ 2
;OO2 3
}OO4 5
publicPP 
requiredPP 
stringPP 
?PP 
	DireccionPP  )
{PP* +
getPP, /
;PP/ 0
setPP1 4
;PP4 5
}PP6 7
publicQQ 
requiredQQ 
stringQQ 
CorreoQQ %
{QQ& '
getQQ( +
;QQ+ ,
setQQ- 0
;QQ0 1
}QQ2 3
[SS 	

JsonIgnoreSS	 
]SS 
publicTT 
ListTT 
<TT 
CitaTT 
>TT 
?TT 
ReservasTT #
{TT$ %
getTT& )
;TT) *
setTT+ .
;TT. /
}TT0 1
}UU 
publicWW 

classWW 
CitaWW 
{XX 
[YY 	

JsonIgnoreYY	 
]YY 
publicZZ 
intZZ 
?ZZ 
IdZZ 
{ZZ 
getZZ 
;ZZ 
setZZ !
;ZZ! "
}ZZ# $
public[[ 
required[[ 
int[[ 

PacienteId[[ &
{[[' (
get[[) ,
;[[, -
set[[. 1
;[[1 2
}[[3 4
public\\ 
required\\ 
int\\ 
DoctorId\\ $
{\\% &
get\\' *
;\\* +
set\\, /
;\\/ 0
}\\1 2
public]] 
required]] 
DateTime]]  
?]]  !
Fecha]]" '
{]]( )
get]]* -
;]]- .
set]]/ 2
;]]2 3
}]]4 5
public__ 
required__ 
TimeOnly__  
?__  !
Hora__" &
{__' (
get__) ,
;__, -
set__. 1
;__1 2
}__3 4
public`` 
required`` 
int`` 
Consultorio`` '
{``( )
get``* -
;``- .
set``/ 2
;``2 3
}``4 5
[bb 	

JsonIgnorebb	 
]bb 
publiccc 
Pacientecc 
?cc 
Pacientecc !
{cc" #
getcc$ '
;cc' (
setcc) ,
;cc, -
}cc. /
[dd 	

JsonIgnoredd	 
]dd 
publicee 
Medicoee 
?ee 
Medicoee 
{ee 
getee  #
;ee# $
setee% (
;ee( )
}ee* +
}ff 
publichh 

classhh 
Consultoriohh 
{ii 
[jj 	

JsonIgnorejj	 
]jj 
publickk 
intkk 
?kk 
Idkk 
{kk 
getkk 
;kk 
setkk !
;kk! "
}kk# $
publicll 
requiredll 
intll 
?ll 
Numeroll #
{ll$ %
getll& )
;ll) *
setll+ .
;ll. /
}ll0 1
publicmm 
requiredmm 
intmm 
?mm 
Pisomm !
{mm" #
getmm$ '
;mm' (
setmm) ,
;mm, -
}mm. /
}nn 
}oo 